{"ast":null,"code":"var _jsxFileName = \"D:\\\\3rd Sem MCA\\\\sweet-shop\\\\frontend\\\\src\\\\pages\\\\DashboardPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport api from '../services/api';\nimport SweetList from '../components/SweetList';\nimport SearchBar from '../components/SearchBar';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DashboardPage() {\n  _s();\n  const [sweets, setSweets] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const {\n    user\n  } = useAuth(); // Get user info\n\n  // Function to fetch sweets\n  const fetchSweets = useCallback(async (searchParams = {}) => {\n    setIsLoading(true);\n    setError('');\n    try {\n      // Use the /api/sweets/search endpoint\n      const res = await api.get('/sweets/search', {\n        params: searchParams\n      });\n      setSweets(res.data);\n    } catch (err) {\n      setError('Failed to fetch sweets. Please try again.');\n      console.error(err);\n    }\n    setIsLoading(false);\n  }, []);\n\n  // Fetch sweets when the component loads\n  useEffect(() => {\n    fetchSweets();\n  }, [fetchSweets]);\n\n  // Handle a purchase, which updates the quantity of a sweet in the list\n  const handlePurchase = updatedSweet => {\n    setSweets(currentSweets => currentSweets.map(sweet => sweet._id === updatedSweet._id ? updatedSweet : sweet));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Welcome to the Sweet Shop, \", user === null || user === void 0 ? void 0 : user.username, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Browse our collection of delicious sweets.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n      onSearch: fetchSweets\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading sweets...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }, this), !isLoading && !error && /*#__PURE__*/_jsxDEV(SweetList, {\n      sweets: sweets,\n      onAction: handlePurchase,\n      actionType: \"purchase\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(DashboardPage, \"XU/O5kyRQZSsn985vSXEvT0DFMY=\", false, function () {\n  return [useAuth];\n});\n_c = DashboardPage;\nexport default DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","api","SweetList","SearchBar","useAuth","jsxDEV","_jsxDEV","DashboardPage","_s","sweets","setSweets","isLoading","setIsLoading","error","setError","user","fetchSweets","searchParams","res","get","params","data","err","console","handlePurchase","updatedSweet","currentSweets","map","sweet","_id","className","children","username","fileName","_jsxFileName","lineNumber","columnNumber","onSearch","onAction","actionType","_c","$RefreshReg$"],"sources":["D:/3rd Sem MCA/sweet-shop/frontend/src/pages/DashboardPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport api from '../services/api';\r\nimport SweetList from '../components/SweetList';\r\nimport SearchBar from '../components/SearchBar';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nfunction DashboardPage() {\r\n  const [sweets, setSweets] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { user } = useAuth(); // Get user info\r\n\r\n  // Function to fetch sweets\r\n  const fetchSweets = useCallback(async (searchParams = {}) => {\r\n    setIsLoading(true);\r\n    setError('');\r\n    try {\r\n      // Use the /api/sweets/search endpoint\r\n      const res = await api.get('/sweets/search', { params: searchParams });\r\n      setSweets(res.data);\r\n    } catch (err) {\r\n      setError('Failed to fetch sweets. Please try again.');\r\n      console.error(err);\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Fetch sweets when the component loads\r\n  useEffect(() => {\r\n    fetchSweets();\r\n  }, [fetchSweets]);\r\n\r\n  // Handle a purchase, which updates the quantity of a sweet in the list\r\n  const handlePurchase = (updatedSweet) => {\r\n    setSweets(currentSweets =>\r\n      currentSweets.map(sweet =>\r\n        sweet._id === updatedSweet._id ? updatedSweet : sweet\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-page\">\r\n      <h1>Welcome to the Sweet Shop, {user?.username}!</h1>\r\n      <p>Browse our collection of delicious sweets.</p>\r\n      \r\n      <SearchBar onSearch={fetchSweets} />\r\n      \r\n      {isLoading && <p>Loading sweets...</p>}\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n      \r\n      {!isLoading && !error && (\r\n        <SweetList \r\n          sweets={sweets} \r\n          onAction={handlePurchase} \r\n          actionType=\"purchase\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DashboardPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}